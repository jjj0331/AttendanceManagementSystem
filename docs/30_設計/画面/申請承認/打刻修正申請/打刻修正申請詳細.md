# 打刻修正申請詳細

## 概要

| 項目 | 内容 |
|------|------|
| 画面ID | SCR-CC-002 |
| 画面種別 | 詳細 |
| 関連集約 | 打刻修正申請（申請承認コンテキスト） |
| URL | `/clock-corrections/{id}` |

---

## ワイヤーフレーム

### パターン1: SUBMITTED 状態（上長が閲覧時）

```
┌───────────────────────────────────────────────────────────────────────────┐
│ {システム名}                                                  [user ▼]   │
├───────────────────────────────────────────────────────────────────────────┤
│ パンくず: ホーム > 申請管理 > 打刻修正申請一覧 > 打刻修正申請詳細       │
├───────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│ 打刻修正申請詳細                                      [申請中]          │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 申請情報                                                           │ │
│ │                                                                   │ │
│ │ 対象日           2026/02/10 (月)                                   │ │
│ │ 修正種別         退勤                                             │ │
│ │ 修正前時刻       17:00                                             │ │
│ │ 修正後時刻       18:30                                             │ │
│ │ 修正理由         退勤打刻を忘れたため、実際の退勤時刻に修正を     │ │
│ │                  お願いします                                     │ │
│ │ 申請日時         2026/02/10 10:00                                  │ │
│ │ 申請者           山田太郎 (EMP-001)                                │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 承認/却下                                                         │ │
│ │                                                                   │ │
│ │ 却下理由  [                                               ]       │ │
│ │           ※却下する場合のみ入力 (10-200文字)                       │ │
│ │                                                                   │ │
│ │                              [却下する]  [■ 承認する ■]           │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 操作履歴                                                           │ │
│ │                                                                   │ │
│ │ 2026/02/10 10:00  山田太郎  申請                                   │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ [← 一覧に戻る]                                                         │
│                                                                         │
└───────────────────────────────────────────────────────────────────────────┘
```

### パターン2: REJECTED 状態（申請者が閲覧時）

```
┌───────────────────────────────────────────────────────────────────────────┐
│ {システム名}                                                  [user ▼]   │
├───────────────────────────────────────────────────────────────────────────┤
│ パンくず: ホーム > 申請管理 > 打刻修正申請一覧 > 打刻修正申請詳細       │
├───────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│ 打刻修正申請詳細                                        [却下]          │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 申請情報                                                           │ │
│ │                                                                   │ │
│ │ 対象日           2026/02/05 (水)                                   │ │
│ │ 修正種別         出勤                                             │ │
│ │ 修正前時刻       09:15                                             │ │
│ │ 修正後時刻       09:00                                             │ │
│ │ 修正理由         ICカードの読み取り不良で出勤打刻が遅れたため     │ │
│ │                  修正をお願いします                                │ │
│ │ 申請日時         2026/02/05 10:00                                  │ │
│ │ 申請者           山田太郎 (EMP-001)                                │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 却下情報                                                           │ │
│ │                                                                   │ │
│ │ 却下者           鈴木部長 (MGR-001)                                │ │
│ │ 却下理由         勤怠記録を確認したところ、打刻時刻は正しいと     │ │
│ │                  判断します。再度確認をお願いします               │ │
│ │ 却下日時         2026/02/05 14:00                                  │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 再申請                                                             │ │
│ │                                                                   │ │
│ │ 修正後時刻  [ 09:00         ]                                     │ │
│ │ 修正理由    [セキュリティカメラの記録を確認し、出勤時刻を修正  ]   │ │
│ │             ※10-200文字                                           │ │
│ │                                                                   │ │
│ │                                          [■ 再申請する ■]         │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 操作履歴                                                           │ │
│ │                                                                   │ │
│ │ 2026/02/05 14:00  鈴木部長  却下                                   │ │
│ │ 2026/02/05 10:00  山田太郎  申請                                   │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ [← 一覧に戻る]                                                         │
│                                                                         │
└───────────────────────────────────────────────────────────────────────────┘
```

### パターン3: MGR_APPROVED 状態（参考用・仮締め前は自動COMPLETEDのため通常表示されない）

```
┌───────────────────────────────────────────────────────────────────────────┐
│ {システム名}                                                  [user ▼]   │
├───────────────────────────────────────────────────────────────────────────┤
│ パンくず: ホーム > 申請管理 > 打刻修正申請一覧 > 打刻修正申請詳細       │
├───────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│ 打刻修正申請詳細                                      [上長済]          │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 申請情報                                                           │ │
│ │                                                                   │ │
│ │ 対象日           2026/02/07 (金)                                   │ │
│ │ 修正種別         両方                                             │ │
│ │ 修正前時刻       09:30 / 17:00                                     │ │
│ │ 修正後時刻       09:00 / 18:00                                     │ │
│ │ 修正理由         出退勤両方の打刻を修正します                     │ │
│ │ 申請日時         2026/02/08 09:30                                  │ │
│ │ 申請者           山田太郎 (EMP-001)                                │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 上長承認情報                                                       │ │
│ │                                                                   │ │
│ │ 承認者           鈴木部長 (MGR-001)                                │ │
│ │ 承認日時         2026/02/08 14:00                                  │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 操作履歴                                                           │ │
│ │                                                                   │ │
│ │ 2026/02/08 14:00  鈴木部長  上長承認                               │ │
│ │ 2026/02/08 09:30  山田太郎  申請                                   │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ [← 一覧に戻る]                                                         │
│                                                                         │
└───────────────────────────────────────────────────────────────────────────┘
```

### パターン4: PENDING_HR 状態（人事担当者が閲覧時）

```
┌───────────────────────────────────────────────────────────────────────────┐
│ {システム名}                                                  [user ▼]   │
├───────────────────────────────────────────────────────────────────────────┤
│ パンくず: ホーム > 申請管理 > 打刻修正申請一覧 > 打刻修正申請詳細       │
├───────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│ 打刻修正申請詳細                                      [人事待]          │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ ⚠ 仮締め後の修正申請です                                          │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 申請情報                                                           │ │
│ │                                                                   │ │
│ │ 対象日           2026/02/07 (金)                                   │ │
│ │ 修正種別         両方                                             │ │
│ │ 修正前時刻       09:30 / 17:00                                     │ │
│ │ 修正後時刻       09:00 / 18:00                                     │ │
│ │ 修正理由         出退勤両方の打刻を修正します。ICカード不具合の   │ │
│ │                  ため                                             │ │
│ │ 申請日時         2026/02/08 09:30                                  │ │
│ │ 申請者           田中太郎 (EMP-003)                                │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 上長承認情報                                                       │ │
│ │                                                                   │ │
│ │ 承認者           鈴木部長 (MGR-002)                                │ │
│ │ 承認日時         2026/02/09 10:00                                  │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 人事承認                                                           │ │
│ │                                                                   │ │
│ │                                      [■ 人事承認する ■]           │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 操作履歴                                                           │ │
│ │                                                                   │ │
│ │ 2026/02/09 10:00  鈴木部長  上長承認                               │ │
│ │ 2026/02/08 09:30  田中太郎  申請                                   │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ [← 一覧に戻る]                                                         │
│                                                                         │
└───────────────────────────────────────────────────────────────────────────┘
```

### パターン5: COMPLETED 状態（仮締め後・人事承認あり・閲覧のみ）

```
┌───────────────────────────────────────────────────────────────────────────┐
│ {システム名}                                                  [user ▼]   │
├───────────────────────────────────────────────────────────────────────────┤
│ パンくず: ホーム > 申請管理 > 打刻修正申請一覧 > 打刻修正申請詳細       │
├───────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│ 打刻修正申請詳細                                      [完了]            │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ ⚠ 仮締め後の修正申請です                                          │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 申請情報                                                           │ │
│ │                                                                   │ │
│ │ 対象日           2026/02/07 (金)                                   │ │
│ │ 修正種別         両方                                             │ │
│ │ 修正前時刻       09:30 / 17:00                                     │ │
│ │ 修正後時刻       09:00 / 18:00                                     │ │
│ │ 修正理由         出退勤両方の打刻を修正します。ICカード不具合の   │ │
│ │                  ため                                             │ │
│ │ 申請日時         2026/02/08 09:30                                  │ │
│ │ 申請者           田中太郎 (EMP-003)                                │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 上長承認情報                                                       │ │
│ │                                                                   │ │
│ │ 承認者           鈴木部長 (MGR-002)                                │ │
│ │ 承認日時         2026/02/09 10:00                                  │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 人事承認情報                                                       │ │
│ │                                                                   │ │
│ │ 人事承認者       佐藤人事 (HR-001)                                 │ │
│ │ 人事承認日時     2026/02/10 11:00                                  │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 操作履歴                                                           │ │
│ │                                                                   │ │
│ │ 2026/02/10 11:00  佐藤人事  人事承認                               │ │
│ │ 2026/02/09 10:00  鈴木部長  上長承認                               │ │
│ │ 2026/02/08 09:30  田中太郎  申請                                   │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ [← 一覧に戻る]                                                         │
│                                                                         │
└───────────────────────────────────────────────────────────────────────────┘
```

### パターン6: COMPLETED 状態（仮締め前・上長承認のみ・閲覧のみ）

```
┌───────────────────────────────────────────────────────────────────────────┐
│ {システム名}                                                  [user ▼]   │
├───────────────────────────────────────────────────────────────────────────┤
│ パンくず: ホーム > 申請管理 > 打刻修正申請一覧 > 打刻修正申請詳細       │
├───────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│ 打刻修正申請詳細                                      [完了]            │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 申請情報                                                           │ │
│ │                                                                   │ │
│ │ 対象日           2026/02/10 (月)                                   │ │
│ │ 修正種別         退勤                                             │ │
│ │ 修正前時刻       17:00                                             │ │
│ │ 修正後時刻       18:30                                             │ │
│ │ 修正理由         退勤打刻を忘れたため、実際の退勤時刻に修正を     │ │
│ │                  お願いします                                     │ │
│ │ 申請日時         2026/02/10 10:00                                  │ │
│ │ 申請者           山田太郎 (EMP-001)                                │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 上長承認情報                                                       │ │
│ │                                                                   │ │
│ │ 承認者           鈴木部長 (MGR-001)                                │ │
│ │ 承認日時         2026/02/10 14:00                                  │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ 操作履歴                                                           │ │
│ │                                                                   │ │
│ │ 2026/02/10 14:00  鈴木部長  上長承認                               │ │
│ │ 2026/02/10 10:00  山田太郎  申請                                   │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ [← 一覧に戻る]                                                         │
│                                                                         │
└───────────────────────────────────────────────────────────────────────────┘
```

---

## コンポーネント構成

```
ClockCorrectionDetailPage
├── Breadcrumb
│   └── BreadcrumbItem ("ホーム", "申請管理", "打刻修正申請一覧", "打刻修正申請詳細")
├── PageHeader
│   ├── Title ("打刻修正申請詳細")
│   └── StatusBadge (現在のステータス)
├── ProvisionalCloseWarning (afterProvisionalClose=true のみ表示)
│   └── AlertBanner ("⚠ 仮締め後の修正申請です")
├── RequestInfoSection
│   └── DefinitionList
│       ├── TargetDate (対象日)
│       ├── CorrectionType (修正種別)
│       ├── OriginalClockIn (修正前出勤時刻)
│       ├── OriginalClockOut (修正前退勤時刻)
│       ├── CorrectedClockIn (修正後出勤時刻)
│       ├── CorrectedClockOut (修正後退勤時刻)
│       ├── Reason (修正理由)
│       ├── RequestedAt (申請日時)
│       └── EmployeeName (申請者)
├── ApprovalSection (SUBMITTED + 上長のみ表示)
│   ├── RejectionReasonInput (却下理由テキストエリア)
│   └── ButtonGroup
│       ├── RejectButton (却下する)
│       └── ApproveButton (承認する)
├── RejectionInfoSection (REJECTED のみ表示)
│   └── DefinitionList
│       ├── ApproverName (却下者)
│       ├── RejectionReason (却下理由)
│       └── DecidedAt (却下日時)
├── ResubmitSection (REJECTED + 申請者本人のみ表示)
│   ├── CorrectedClockInInput (修正後出勤時刻 — CLOCK_IN/BOTH時)
│   ├── CorrectedClockOutInput (修正後退勤時刻 — CLOCK_OUT/BOTH時)
│   ├── ReasonTextarea (修正理由)
│   └── ResubmitButton (再申請する)
├── MgrApprovalInfoSection (MGR_APPROVED / PENDING_HR / COMPLETED で上長承認済みの場合表示)
│   └── DefinitionList
│       ├── ApproverName (承認者)
│       └── DecidedAt (承認日時)
├── HrApprovalSection (PENDING_HR + 人事担当者のみ表示)
│   └── HrApproveButton (人事承認する)
├── HrApprovalInfoSection (COMPLETED + afterProvisionalClose=true の場合表示)
│   └── DefinitionList
│       ├── HrApproverName (人事承認者)
│       └── HrDecidedAt (人事承認日時)
├── OperationHistory
│   └── HistoryList
│       └── HistoryItem (日時 + 操作者 + 操作)
├── BackLink ("← 一覧に戻る")
└── ToastNotification (操作結果通知)
```

---

## 表示項目

### 申請情報

| 項目 | 表示名 | 型 | フォーマット | 備考 |
|------|--------|-----|-------------|------|
| targetDate | 対象日 | date | YYYY/MM/DD (曜) | - |
| correctionType | 修正種別 | enum | 表示名変換（下表参照） | - |
| originalClockIn | 修正前出勤時刻 | time | HH:mm | null の場合は非表示 |
| originalClockOut | 修正前退勤時刻 | time | HH:mm | null の場合は非表示 |
| correctedClockIn | 修正後出勤時刻 | time | HH:mm | CLOCK_IN/BOTH時のみ表示 |
| correctedClockOut | 修正後退勤時刻 | time | HH:mm | CLOCK_OUT/BOTH時のみ表示 |
| reason | 修正理由 | text | - | 全文表示 |
| requestedAt | 申請日時 | datetime | YYYY/MM/DD HH:mm | - |
| employeeName | 申請者 | text | 氏名 (社員ID) | - |

### 修正種別の表示変換

| 値 | 表示 |
|----|------|
| CLOCK_IN | 出勤 |
| CLOCK_OUT | 退勤 |
| BOTH | 両方 |

### 仮締め後フラグ表示

| 条件 | 表示 | 備考 |
|------|------|------|
| afterProvisionalClose = true | ⚠「仮締め後の修正申請です」 | AlertBanner（amber-100背景 + amber-700テキスト） |
| afterProvisionalClose = false | 非表示 | - |

### 上長承認/却下情報（決定済みの場合）

| 項目 | 表示名 | 型 | フォーマット | 備考 |
|------|--------|-----|-------------|------|
| approverName | 承認者/却下者 | text | 氏名 (管理者ID) | - |
| rejectionReason | 却下理由 | text | - | REJECTED のみ |
| decidedAt | 承認日時/却下日時 | datetime | YYYY/MM/DD HH:mm | - |

### 人事承認情報（COMPLETED + 仮締め後の場合）

| 項目 | 表示名 | 型 | フォーマット | 備考 |
|------|--------|-----|-------------|------|
| hrApproverName | 人事承認者 | text | 氏名 (人事ID) | - |
| hrDecidedAt | 人事承認日時 | datetime | YYYY/MM/DD HH:mm | - |

### ステータスバッジ

| 値 | 表示 | 色 | 背景色 |
|----|------|-----|--------|
| SUBMITTED | 申請中 | blue-700 | blue-100 |
| MGR_APPROVED | 上長済 | indigo-700 | indigo-100 |
| PENDING_HR | 人事待 | amber-700 | amber-100 |
| COMPLETED | 完了 | green-700 | green-100 |
| REJECTED | 却下 | red-700 | red-100 |

### 操作履歴のイベント種別表示

| event_type | 表示 |
|------------|------|
| SUBMITTED | 申請 |
| MGR_APPROVED | 上長承認 |
| REJECTED | 却下 |
| RESUBMITTED | 再申請 |
| HR_APPROVED | 人事承認 |

---

## アクション

### 条件付きアクションセクション

| アクション | トリガー | 表示条件 | 処理 | 権限 |
|-----------|---------|---------|------|------|
| 承認する | 承認ボタン | status=SUBMITTED | approve API 実行 → ステータス更新 | 上長のみ |
| 却下する | 却下ボタン | status=SUBMITTED | reject API 実行（却下理由必須 10-200文字） → ステータス更新 | 上長のみ |
| 再申請する | 再申請ボタン | status=REJECTED | resubmit API 実行（修正後時刻+修正理由を更新） → ステータス更新 | 申請者本人のみ |
| 人事承認する | 人事承認ボタン | status=PENDING_HR | approve-hr API 実行 → ステータス更新 | 人事担当者のみ |
| 一覧に戻る | 戻るリンク | 常時 | 打刻修正申請一覧 (SCR-CC-001) へ遷移 | 全ロール |

### 確認ダイアログ

| アクション | ダイアログ | メッセージ |
|-----------|----------|-----------|
| 承認する | 確認ダイアログ | 「この打刻修正申請を承認しますか？」 |
| 却下する | 確認ダイアログ | 「この打刻修正申請を却下しますか？」 |
| 再申請する | 確認ダイアログ | 「修正内容で再申請しますか？」 |
| 人事承認する | 確認ダイアログ | 「この打刻修正申請を人事承認しますか？承認後、打刻データが修正されます」 |

### セクション表示条件マトリクス

| セクション | SUBMITTED (上長) | SUBMITTED (本人) | REJECTED (本人) | MGR_APPROVED | PENDING_HR (人事) | COMPLETED (仮締め前) | COMPLETED (仮締め後) |
|-----------|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| 仮締め後警告 | △ | △ | △ | △ | ✅ | - | ✅ |
| 申請情報 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| 承認/却下 | ✅ | - | - | - | - | - | - |
| 却下情報 | - | - | ✅ | - | - | - | - |
| 再申請 | - | - | ✅ | - | - | - | - |
| 上長承認情報 | - | - | - | ✅ | ✅ | ✅ | ✅ |
| 人事承認 | - | - | - | - | ✅ | - | - |
| 人事承認情報 | - | - | - | - | - | - | ✅ |
| 操作履歴 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |

※ △ = afterProvisionalClose=true の場合のみ表示

---

## 状態管理

```typescript
/** 打刻修正申請ステータス */
type CorrectionStatus =
  | 'SUBMITTED'
  | 'MGR_APPROVED'
  | 'PENDING_HR'
  | 'COMPLETED'
  | 'REJECTED';

/** 修正種別 */
type CorrectionType =
  | 'CLOCK_IN'
  | 'CLOCK_OUT'
  | 'BOTH';

/** 打刻修正申請詳細データ */
interface ClockCorrectionRequestDetail {
  clockCorrectionRequestId: string;
  employeeId: string;
  employeeName: string;            // 従業員マスタから導出
  targetDate: string;              // ISO 8601 date
  correctionType: CorrectionType;
  originalClockIn: string | null;  // HH:mm
  originalClockOut: string | null; // HH:mm
  correctedClockIn: string | null; // HH:mm（CLOCK_IN/BOTH時）
  correctedClockOut: string | null;// HH:mm（CLOCK_OUT/BOTH時）
  reason: string;                  // 10-200文字
  status: CorrectionStatus;
  afterProvisionalClose: boolean;
  approverId: string | null;
  approverName: string | null;     // 従業員マスタから導出
  hrApproverId: string | null;
  hrApproverName: string | null;   // 従業員マスタから導出
  rejectionReason: string | null;
  requestedAt: string;             // ISO 8601 datetime
  decidedAt: string | null;        // ISO 8601 datetime
  hrDecidedAt: string | null;      // ISO 8601 datetime
  version: number;
  operationHistory: OperationHistoryItem[];
}

/** 操作履歴 */
interface OperationHistoryItem {
  action: string;                  // SUBMITTED / MGR_APPROVED / REJECTED / RESUBMITTED / HR_APPROVED / COMPLETED
  performedBy: string;             // 操作者ID
  performedByName: string;         // 操作者名（従業員マスタから導出）
  performedAt: string;             // ISO 8601 datetime
  comment: string | null;          // コメント（却下理由等）
}

/** 再申請フォーム */
interface ResubmitForm {
  correctedClockIn: string | null; // HH:mm（CLOCK_IN/BOTH時）
  correctedClockOut: string | null;// HH:mm（CLOCK_OUT/BOTH時）
  reason: string;                  // 10-200文字
}

/** 画面全体の状態 */
interface ClockCorrectionDetailState {
  /** 詳細データ */
  data: {
    request: ClockCorrectionRequestDetail | null;
    history: OperationHistoryItem[];
    isLoading: boolean;
    error: {
      message: string;
      retryAction: (() => void) | null;
    } | null;
  };

  /** 承認/却下セクション（上長のみ） */
  approvalSection: {
    rejectionReason: string;       // 却下理由入力値
    isSubmitting: boolean;
  };

  /** 再申請セクション（申請者本人のみ） */
  resubmitSection: {
    form: ResubmitForm;
    isSubmitting: boolean;
    validationErrors: Record<string, string>;
  };

  /** 人事承認セクション（人事担当者のみ） */
  hrApprovalSection: {
    isSubmitting: boolean;
  };

  /** 確認ダイアログ */
  confirmDialog: {
    isOpen: boolean;
    action: 'approve' | 'reject' | 'resubmit' | 'approve-hr' | null;
  };
}
```

---

## API連携

| 操作 | エンドポイント | メソッド | パラメータ |
|------|--------------|---------|-----------|
| 詳細取得 | `/api/v1/clock-corrections/{id}` | GET | - |
| 承認（上長） | `/api/v1/clock-corrections/{id}/actions/approve` | POST | approverId |
| 却下 | `/api/v1/clock-corrections/{id}/actions/reject` | POST | approverId, rejectionReason |
| 再申請 | `/api/v1/clock-corrections/{id}/actions/resubmit` | POST | correctedClockIn, correctedClockOut, reason |
| 人事承認 | `/api/v1/clock-corrections/{id}/actions/approve-hr` | POST | hrApproverId |

---

## エラー処理

| エラー | HTTPステータス | 表示方法 | アクション |
|--------|--------------|---------|----------|
| 通信エラー | - | Toast (error) | 再試行ボタン |
| 認証エラー | 401 | リダイレクト | ログイン画面へ |
| 権限エラー | 403 | Toast (error) | 「この操作を行う権限がありません」 |
| 申請不存在 | 404 | Toast (error) + リダイレクト | 一覧画面へ |
| 状態不整合 | 409 | Toast (warning) | 「申請の状態が変更されています」 + 再取得 |
| バリデーションエラー | 400 | フォーム内エラー表示 | 各フィールド下にエラーメッセージ |
| 前提条件エラー | 422 | Toast (error) | 「修正後時刻が修正前時刻と同一です」 |
| サーバーエラー | 500 | Toast (error) | 再試行ボタン |

---

## レスポンシブ対応

| ブレークポイント | 対応 |
|----------------|------|
| Desktop (>1024px) | フル表示（セクション横並びなし、縦積み） |
| Tablet (768-1024px) | 同上（レイアウト変更なし） |
| Mobile (<768px) | パディング縮小、ボタン幅 100% |

---

## デザインガイドライン

> aesthetic: `clean-minimal` / colorScheme: `mono-accent`

### カラー＆テーマ

| 項目 | 値 | 備考 |
|------|-----|------|
| ベースカラー | #FFFFFF | ページ背景 |
| サーフェスカラー | #F9FAFB (gray-50) | セクション背景 |
| テキスト: Primary | #111827 (gray-900) | 見出し・データ値 |
| テキスト: Secondary | #6B7280 (gray-500) | ラベル・補足 |
| ボーダー | #E5E7EB (gray-200) | セクション区切り |
| アクセントカラー | #2563EB (blue-600) | Primary ボタン（承認・再申請・人事承認） |
| Danger カラー | #DC2626 (red-600) | 却下ボタン |
| Warning カラー | #D97706 (amber-600) | 仮締め後警告 |
| バッジ: 申請中 | blue-100 / blue-700 | SUBMITTED |
| バッジ: 上長済 | indigo-100 / indigo-700 | MGR_APPROVED |
| バッジ: 人事待 | amber-100 / amber-700 | PENDING_HR |
| バッジ: 完了 | green-100 / green-700 | COMPLETED |
| バッジ: 却下 | red-100 / red-700 | REJECTED |
| コントラスト比 | WCAG AA 準拠（4.5:1 以上） | テキスト/背景 |

### タイポグラフィ

| 要素 | フォント | サイズ | ウェイト | 備考 |
|------|---------|--------|---------|------|
| ページタイトル | system-ui | 24px | 700 | パンくず下 |
| セクション見出し | system-ui | 18px | 600 | 申請情報・承認情報等 |
| 定義リスト: ラベル | system-ui | 12px | 500 | 「対象日」等 |
| 定義リスト: 値 | system-ui | 14px | 400 | データ値 |
| 時刻表示 | monospace | 14px | 400 | 日時データ |
| ボタンラベル | system-ui | 14px | 500 | 承認・却下・再申請・人事承認 |
| 履歴テキスト | system-ui | 13px | 400 | 操作履歴行 |
| 警告バナー | system-ui | 14px | 500 | 仮締め後警告テキスト |

### レイアウト原則

| 項目 | 値 |
|------|-----|
| 基本余白 | 8px グリッド |
| ページ左右パディング | 24px |
| セクション: パディング | 20px |
| セクション: 角丸 | 8px |
| セクション: ボーダー | 1px solid #E5E7EB |
| セクション間余白 | 20px |
| 定義リスト: ラベル幅 | 140px |
| 定義リスト: 行間 | 12px |
| ボタン角丸 | 6px |
| ボタン高さ | 40px |
| 区切り線 | 1px solid #E5E7EB |
| 警告バナー: パディング | 12px 16px |
| 警告バナー: 角丸 | 8px |
| 警告バナー: ボーダー | 1px solid #FCD34D (amber-300) |
| 警告バナー: 背景 | #FFFBEB (amber-50) |

### インタラクション

| 状態 | スタイル |
|------|---------|
| ボタン: ホバー | 背景色 5% 暗く |
| ボタン: disabled | opacity: 0.4 |
| ボタン: 送信中 | スピナー表示、全ボタン disabled |
| フォーカス | 2px outline (blue-600) + 2px offset |
| 確認ダイアログ | 中央モーダル（オーバーレイ付き） |
| ローディング | Skeleton UI（セクション単位） |
| 画面遷移 | 即時（アニメーションなし） |
| フィードバック | Toast 通知（右上、3秒自動消去） |

### アンチパターン（避けるべき表現）

- グラデーション背景の多用
- 装飾的なドロップシャドウの重ね掛け
- 無意味なアニメーション・トランジション
- ジェネリックなAI生成風のイラスト
- 過度な角丸（pill 形状の乱用）
- アクションボタンの配置を状態によって移動させる（固定位置が望ましい）

---

## 品質チェック結果

- [x] 全クエリに対応する表示要素がある（申請情報・上長承認情報・人事承認情報・却下情報・操作履歴の全項目を表示）
- [x] 全コマンドに対応する操作UIがある（承認・却下・再申請・人事承認の4アクション + 確認ダイアログ）
- [x] エラー状態の表示が定義されている（Toast通知 + 再試行、状態不整合時の再取得、バリデーションエラー）
- [x] 状態遷移がUI上で表現されている（5種ステータスバッジ + 状態別セクション表示切替 + 仮締め後警告バナー）
- [x] 6パターンのワイヤーフレームが揃っている（SUBMITTED×上長、REJECTED×申請者、MGR_APPROVED、PENDING_HR×人事、COMPLETED×仮締め後、COMPLETED×仮締め前）
- [x] 2段階承認ワークフローが正しく表現されている（上長承認情報 + 人事承認セクション/情報の条件分岐）
- [x] 仮締め後フラグの視覚的表現がある（AlertBanner による警告表示）

<!-- メトリクスサマリー（/estimate 自動集計用）
画面種別: 詳細
コンポーネント数: 26
DataTable: 0
SearchForm: 0
フォーム数: 2
チャート数: 0
-->
