# セッション2 会話記録 - 例外処理・制約深掘り

**実施日時**: 2026-02-07
**参加者**: ドメインエキスパート、モデリングアシスタント
**セッション目的**: ホットスポット解消、業務ルールの数値化、例外処理フロー
**達成目標**: ホットスポット0個、業務ルール85%数値化

---

## Phase 1: 前回の振り返り（10分）

**【モデリングアシスタント】**
> 前回のSession 1で抽出した基本フローについて、思い出したことや補足はありますか？

**【ドメインエキスパート】**
> 1つ補足です。打刻修正だけでなく「勤務実績修正」という概念もあります。例えば、直行直帰の場合は打刻がそもそもできないので、勤務実績として「9:00-18:00 直行直帰」のように手入力します。これも上長承認が必要です。

**【得られた洞察】**
- 打刻修正と勤務実績修正は別概念
- 直行直帰はシステム外での勤務扱い

---

## Phase 2: ホットスポット解消（40分）

### HS1: シフト勤務の勤務時間計算ルール

**【モデリングアシスタント】**
> シフト勤務の種類と、それぞれの勤務時間計算ルールを具体的に教えてください。

**【ドメインエキスパート】**
> 勤務パターンは3種類です。
>
> 1. **固定時間制**: 9:00-18:00（休憩1h）、所定労働8h
> 2. **シフト制**: 早番6:00-15:00、遅番14:00-23:00、夜勤22:00-翌7:00（各休憩1h）
> 3. **フレックスタイム制**: コアタイム10:00-15:00、フレキシブル6:00-10:00/15:00-22:00、1ヶ月の所定労働時間は暦日数×8h÷7（端数切捨て）
>
> 残業は所定終業時刻を超えた部分。フレックスは月単位で清算し、月の所定を超えた分が残業です。

**【モデリングアシスタント】**
> 夜勤の日跨ぎはどう判定しますか？

**【ドメインエキスパート】**
> 勤務開始日を「勤務日」とします。22:00-翌7:00の夜勤なら、22:00の日が勤務日です。深夜割増（22:00-5:00）は自動計算です。

**【得られた洞察】**
- 勤務パターン3種、各パターンで残業計算が異なる
- 夜勤は勤務開始日が勤務日
- フレックスは月単位清算
- 深夜割増は22:00-5:00

---

### HS2: 36協定の閾値と通知

**【モデリングアシスタント】**
> 36協定の段階的アラートの閾値と通知先を具体的に教えてください。

**【ドメインエキスパート】**
> 法定上限と社内基準の2段階あります。
>
> **月次**:
> - 30h超過: 上長にメール通知（注意喚起）
> - 40h超過: 上長 + 人事にメール通知（警告）
> - 45h到達: 上長 + 人事 + 本人にメール通知（法定上限到達）
>
> **年次**:
> - 300h超過: 上長 + 人事に通知（年間注意）
> - 360h到達: 上長 + 人事 + 本人（年間法定上限）
>
> **特別条項**: 臨時的な事情がある場合、月100h未満/年720h以内で可能。ただし月45h超は年6回まで。2〜6ヶ月平均で80h以内。

**【得られた洞察】**
- 月次3段階（30h/40h/45h）、年次2段階（300h/360h）
- 特別条項は月100h未満/年720h以内/年6回まで/2-6ヶ月平均80h以内

---

### HS3: 半日有給・時間単位有給

**【モデリングアシスタント】**
> 半日有給と時間単位有給の取得単位と残日数計算を具体的に教えてください。

**【ドメインエキスパート】**
> 半日有給は0.5日単位で、午前半休（9:00-12:00勤務免除）または午後半休（13:00-18:00勤務免除）です。
>
> 時間単位有給は1時間単位で、年間5日分（=40h）が上限です。1日の所定労働8hなので、8h=1日換算。残日数は「日数」と「時間」の両方で管理します。例えば残15.5日+3hのような表記になります。
>
> 消化順序は時効が近いものから。半日消化しても時間単位の上限とは別管理です。

**【得られた洞察】**
- 半日: 0.5日単位、午前/午後の区分あり
- 時間単位: 1h単位、年5日分（40h）上限
- 残日数は「日数+時間」のハイブリッド管理
- 半日と時間単位は別枠管理

---

### HS4: 打刻修正の承認フロー詳細

**【モデリングアシスタント】**
> 打刻修正申請が差し戻された場合の再申請フローは？

**【ドメインエキスパート】**
> 上長が却下した場合、却下理由とともに差し戻されます。従業員は内容を修正して再申請できます。再申請回数の上限はありません。ただし、月次仮締め後の修正は人事承認も追加で必要になります。本締め後は一切の修正不可です。

**【得られた洞察】**
- 差し戻し→修正→再申請のサイクルは無制限
- 仮締め後は人事承認が追加で必要
- 本締め後は修正不可

---

### HS5: 夜勤の勤務日判定（再確認）

**【モデリングアシスタント】**
> 夜勤で翌日が休日の場合は？また、夜勤明けの日は勤務日としてカウントしますか？

**【ドメインエキスパート】**
> 夜勤明け日は「明け休み」として扱い、勤務日にはカウントしません。法定の休日労働割増は、暦日0:00-24:00で判定します。例えば土曜22:00-日曜7:00の夜勤で日曜が法定休日の場合、0:00-5:00は休日深夜割増（×1.60）、5:00-7:00は休日割増（×1.35）になります。

**【得られた洞察】**
- 夜勤明け=「明け休み」、勤務日カウントなし
- 割増率: 深夜25%、休日35%、休日深夜60%
- 法定休日は暦日判定

---

## Phase 3: 例外処理フロー抽出（30分）

**【モデリングアシスタント】**
> 勤怠管理で最も起こりやすい障害・トラブルは何ですか？

**【ドメインエキスパート】**
> 一番多いのは打刻忘れです。全打刻の約8%が翌日以降に修正申請されます。次に多いのは承認遅延で、上長が承認を放置するケースです。月末締めの3営業日前にリマインド、1営業日前に人事から督促メールを送っています。
>
> あとは有給の付与タイミングのミスです。入社日起算なので全員バラバラで、自動化しないとほぼ確実にミスが出ます。

**【モデリングアシスタント】**
> システム障害時の代替手段は？

**【ドメインエキスパート】**
> 打刻できない場合は、紙の打刻簿で記録し、復旧後に一括登録します。月次締め処理中にシステム障害が起きた場合は、仮締めの状態で凍結し、復旧後に再開します。本締め処理は途中で中断しても、再実行で冪等に動く必要があります。

**【得られた洞察】**
- 打刻忘れ率: 約8%
- 承認遅延対策: 締め3営業日前リマインド、1営業日前督促
- 有給付与: 入社日起算の自動化が必須
- 月次締め処理は冪等性が必要

---

## Phase 4: 品質チェック（10分）

| 項目 | 達成度 |
|------|--------|
| 基本業務フロー | 90% |
| 例外処理 | 80% |
| 業務ルール | 90%（数値化済み） |

## ホットスポット残存

なし（全5件解消済み）
