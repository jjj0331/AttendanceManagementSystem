# プロジェクト概要

## 基本情報

| 項目 | 内容 |
|------|------|
| プロジェクト名 | 勤怠管理システム（Kintai） |
| 概要 | 従業員の出退勤・休暇・残業を一元管理し、労働基準法に準拠した勤怠データを給与計算に連携するWebシステム |
| 開始日 | 2026-02 |
| ステータス | 計画中 |

---

## 課題背景

### 現状の課題

- Excel + 紙ベースの勤怠管理により、月末の集計作業に人事担当者が3営業日を費やしている
- 残業時間の上限管理が手作業のため、36協定違反のリスクを事前に検知できない
- リモートワーク普及に伴い、自己申告ベースの打刻に信頼性の課題がある
- 有給休暇の残日数管理が属人化しており、付与・消化・時効の計算ミスが頻発している

### なぜ必要か

労働基準法改正（2019年〜）により、年5日の有給取得義務化、残業上限規制（月45h/年360h）が厳格化された。コンプライアンス違反のリスクを排除し、人事担当者の工数を削減するために、リアルタイムで勤怠状況を可視化・管理できるシステムが必要。

---

## ソリューション概要

### 解決アプローチ

Webベースの勤怠管理システムにより、打刻・申請・承認・集計をデジタル化。リアルタイムの残業時間モニタリングとアラート機能により、36協定違反を事前に防止する。

### 主な特徴

- Web/モバイル対応の打刻機能（GPS・IPアドレスによる位置確認オプション）
- 残業時間のリアルタイム監視と段階的アラート（月30h/40h/45h超過時）
- 有給休暇の自動付与・消化追跡・時効管理
- シフト勤務対応（日勤・夜勤・フレックスタイム制）
- 月次勤怠締め処理と給与システム向けデータエクスポート

---

## 主要ステークホルダー

| 役割 | 説明 | 主な関心事 |
|------|------|-----------|
| 一般従業員 | 日常的に打刻・休暇申請を行うメインユーザー | 打刻の手軽さ、残有給日数の確認、申請の手間削減 |
| 管理職（上長） | 部下の勤怠承認・状況把握を行う | 部門の残業状況把握、承認フローの簡便さ |
| 人事担当者 | 全社の勤怠管理・集計・法令対応を行う | 集計の正確性・効率化、36協定遵守、監査対応 |
| 給与担当者 | 勤怠データを元に給与計算を行う | データ連携の信頼性、締め処理の確実さ |

---

## コア機能

| 機能 | 説明 | 優先度 |
|------|------|--------|
| 打刻管理 | 出勤・退勤・休憩開始・休憩終了の記録 | 高 |
| 残業管理 | 残業時間の自動計算、36協定の上限チェック、アラート通知 | 高 |
| 休暇管理 | 有給・特別休暇の申請・承認、自動付与、残日数・時効管理 | 高 |
| シフト管理 | 勤務パターン定義、シフト割当、カレンダー表示 | 中 |
| 承認ワークフロー | 残業申請・休暇申請の上長承認フロー | 高 |
| 月次締め処理 | 勤怠データの確定、給与システム向けCSVエクスポート | 高 |
| ダッシュボード | 部門別・全社の勤怠サマリー、アラート一覧 | 中 |

---

## 技術要件

### 技術スタック

| レイヤー | 技術 |
|---------|------|
| フロントエンド | Next.js (React) |
| バックエンド | Spring Boot (Java) |
| データベース | PostgreSQL |
| インフラ | AWS (ECS Fargate) |

### 非機能要件

| 要件 | 目標 |
|------|------|
| パフォーマンス | 打刻レスポンス 500ms以内、月次集計 10秒以内（従業員500名規模） |
| セキュリティ | 個人情報保護法準拠、通信暗号化（TLS 1.3）、監査ログ保持（7年） |
| 可用性 | 99.5%（平日6:00-24:00）、計画メンテナンスは土日深夜 |

---

## アーキテクチャ方針

### システム構成

| 項目 | 内容 |
|------|------|
| アーキテクチャスタイル | monolith |
| レイヤー構成 | Presentation / Application / Domain / Infrastructure |

### 認証方式

| 項目 | 内容 |
|------|------|
| 認証方式 | JWT |
| OAuth連携 | Google Workspace（社内SSO） |

### データ戦略

| パターン | 備考 |
|---------|------|
| standard | 軽量CQRSで十分。勤怠データは更新頻度が高いため、イミュータブルモデルは打刻ログに限定適用 |

### API方針

| 項目 | 内容 |
|------|------|
| スタイル | REST |
| バージョニング | URL (/api/v1/) |

※ 詳細は `docs/10_アーキテクチャ/技術スタック.md` を参照

---

## 成功指標（KPI）

| 指標 | 目標値 | 測定方法 |
|------|--------|---------|
| 月末集計工数 | 3営業日 → 0.5営業日 | 人事担当者のタイムトラッキング |
| 36協定違反件数 | 0件/年 | システムアラートログ |
| 有給取得率 | 70%以上 | 年次集計レポート |
| 打刻忘れ率 | 5%以下 | 未打刻アラート件数 / 全勤務日数 |

---

## リスクと制約

| リスク/制約 | 影響 | 対策 |
|------------|------|------|
| 既存給与システムとのデータ連携仕様が未確定 | 月次締め処理の実装が遅延する可能性 | 汎用CSV形式で先行実装、API連携は Phase 2 で検討 |
| 就業規則のバリエーション（正社員・契約・パート） | 勤務パターン定義が複雑化 | MVP は正社員のみ対応、契約・パートは v2 |
| リモートワーク時の打刻信頼性 | 不正打刻のリスク | GPS は任意オプション、IPアドレス制限は管理者設定 |

---

## 開発計画

### マイルストーン

| フェーズ | 期間 | 目標 |
|---------|------|------|
| Phase 1 | 2026-02 〜 2026-03 | ドメイン分析・設計完了 |
| Phase 2 | 2026-04 〜 2026-06 | MVP実装（打刻・残業・休暇） |
| Phase 3 | 2026-07 〜 2026-08 | シフト管理・ダッシュボード追加 |
| Phase 4 | 2026-09 | 給与システム連携・本番リリース |

### 次のアクション

- [ ] ディスカバリーセッションでドメイン知識の深掘り
- [ ] イベントストーミングで業務フロー可視化
- [ ] ドメインモデリング

<!-- 品質チェック結果
- [x] プロジェクト名・概要が明記されている
- [x] 課題背景と解決アプローチが対応している
- [x] ステークホルダーが網羅的（従業員・管理職・人事・給与）
- [x] 技術スタックが具体的に記載されている
- [x] 非機能要件に定量目標がある
- [x] KPIが測定可能な形式で定義されている
- [x] リスクに対策が記載されている
- [x] MVPスコープが明確（正社員のみ）
-->
